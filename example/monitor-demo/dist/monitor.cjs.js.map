{"version":3,"file":"monitor.cjs.js","sources":["../src/utils/xhr.js","../src/utils/utils.js","../src/utils/cache.js","../src/utils/generateUniqueID.js","../src/config.js","../src/utils/report.js","../src/error/index.js","../src/performance/utils.js","../src/performance/observeEntries.js","../src/performance/observePaint.js","../src/performance/observeLCP.js","../src/performance/observeCLS.js","../src/performance/observeFID.js","../src/performance/observerLoad.js","../src/performance/observeFirstScreenPaint.js","../src/performance/xhr.js","../src/performance/fetch.js","../src/performance/fps.js","../src/performance/onVueRouter.js","../src/performance/index.js","../src/behavior/utils.js","../src/behavior/pv.js","../src/behavior/pageAccessDuration.js","../src/behavior/pageAccessHeight.js","../src/behavior/onClick.js","../src/behavior/onVueRouter.js","../src/behavior/pageChange.js","../src/behavior/index.js","../src/index.js"],"sourcesContent":["export const originalProto = XMLHttpRequest.prototype\nexport const originalOpen = originalProto.open\nexport const originalSend = originalProto.send","export function deepCopy(target) {\n    if (typeof target === 'object') {\n        const result = Array.isArray(target) ? [] : {}\n        for (const key in target) {\n            if (typeof target[key] == 'object') {\n                result[key] = deepCopy(target[key])\n            } else {\n                result[key] = target[key]\n            }\n        }\n\n        return result\n    }\n\n    return target\n}\n\nexport function onBFCacheRestore(callback) {\n    window.addEventListener('pageshow', event => {\n        if (event.persisted) {\n            callback(event)\n        }\n    }, true)\n}\n\nexport function onBeforeunload(callback) {\n    window.addEventListener('beforeunload', callback, true)\n}\n\nexport function onHidden(callback, once) {\n    const onHiddenOrPageHide = (event) => {\n        if (event.type === 'pagehide' || document.visibilityState === 'hidden') {\n            callback(event)\n            if (once) {\n                window.removeEventListener('visibilitychange', onHiddenOrPageHide, true)\n                window.removeEventListener('pagehide', onHiddenOrPageHide, true)\n            }\n        }\n    }\n\n    window.addEventListener('visibilitychange', onHiddenOrPageHide, true)\n    window.addEventListener('pagehide', onHiddenOrPageHide, true)\n}\n\nexport function executeAfterLoad(callback) {\n    if (document.readyState === 'complete') {\n        callback()\n    } else {\n        const onLoad = () => {\n            callback()\n            window.removeEventListener('load', onLoad, true)\n        }\n\n        window.addEventListener('load', onLoad, true)\n    }\n}\n\nexport function getPageURL() {\n    return window.location.href \n}","import { deepCopy } from './utils'\n\nconst cache = []\n\nexport function getCache() {\n    return deepCopy(cache)\n}\n\nexport function addCache(data) {\n    cache.push(data)\n}\n\nexport function clearCache() {\n    cache.length = 0\n}\n","export default function generateUniqueID() {\n    return `v2-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`\n}","const config = {\n    url: '',\n    appID: '',\n    userID: '',\n    vue: {\n        Vue: null,\n        router: null,\n    },\n}\n\nexport default config\n\nexport function setConfig(options) {\n    for (const key in config) {\n        if (options[key]) {\n            config[key] = options[key]\n        }\n    }\n}","import { originalOpen, originalSend } from './xhr'\nimport { addCache, getCache, clearCache } from './cache'\nimport generateUniqueID from '../utils/generateUniqueID'\nimport config from '../config'\n\nexport function isSupportSendBeacon() {\n    return !!window.navigator?.sendBeacon\n}\n\nconst sendBeacon = isSupportSendBeacon() ? window.navigator.sendBeacon.bind(window.navigator) : reportWithXHR\n\nconst sessionID = generateUniqueID()\nexport function report(data, isImmediate = false) {\n    if (!config.url) {\n        console.error('请设置上传 url 地址')\n    }\n\n    const reportData = JSON.stringify({\n        id: sessionID,\n        appID: config.appID,\n        userID: config.userID,\n        data,\n    })\n    \n    if (isImmediate) {\n        sendBeacon(config.url, reportData)\n        return\n    }\n\n    if (window.requestIdleCallback) {\n        window.requestIdleCallback(() => {\n            sendBeacon(config.url, reportData)\n        }, { timeout: 3000 })\n    } else {\n        setTimeout(() => {\n            sendBeacon(config.url, reportData)\n        })\n    }\n}\n\nlet timer = null\nexport function lazyReportCache(data, timeout = 3000) {\n    addCache(data)\n\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n        const data = getCache()\n        if (data.length) {\n            report(data)\n            clearCache()\n        }\n    }, timeout)\n}\n\nexport function reportWithXHR(data) {\n    const xhr = new XMLHttpRequest()\n    originalOpen.call(xhr, 'post', config.url)\n    originalSend.call(xhr, JSON.stringify(data))\n}","import { lazyReportCache } from '../utils/report'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport config from '../config'\n\nexport default function error() {\n    const oldConsoleError = window.console.error \n    window.console.error = (...args) => { \n        oldConsoleError.apply(this, args)\n        lazyReportCache({\n            type: 'error',\n            subType: 'console-error',\n            startTime: performance.now(),\n            errData: args,\n            pageURL: getPageURL(),\n        })\n    }\n\n    // 捕获资源加载失败错误 js css img...\n    window.addEventListener('error', e => {\n        const target = e.target\n        if (!target) return\n\n        if (target.src || target.href) {\n            const url = target.src || target.href\n            lazyReportCache({\n                url,\n                type: 'error',\n                subType: 'resource',\n                startTime: e.timeStamp,\n                html: target.outerHTML,\n                resourceType: target.tagName,\n                paths: e.path.map(item => item.tagName).filter(Boolean),\n                pageURL: getPageURL(),\n            })\n        }\n    }, true)\n\n    // 监听 js 错误\n    window.onerror = (msg, url, line, column, error) => {\n        lazyReportCache({\n            msg,\n            line,\n            column,\n            error: error.stack,\n            subType: 'js',\n            pageURL: url,\n            type: 'error',\n            startTime: performance.now(),\n        })\n    }\n\n    // 监听 promise 错误 缺点是获取不到列数据\n    window.addEventListener('unhandledrejection', e => {\n        lazyReportCache({\n            reason: e.reason?.stack,\n            subType: 'promise',\n            type: 'error',\n            startTime: e.timeStamp,\n            pageURL: getPageURL(),\n        })\n    })\n\n    if (config.vue?.Vue) {\n        config.vue.Vue.config.errorHandler = (err, vm, info) => {\n            console.error(err)\n\n            lazyReportCache({\n                info,\n                error: err.stack,\n                subType: 'vue',\n                type: 'error',\n                startTime: performance.now(),\n                pageURL: getPageURL(),\n            })\n        }\n    }\n\n    onBFCacheRestore(() => {\n        error()\n    })\n}","export function isSupportPerformanceObserver() {\n    return !!window.PerformanceObserver\n}","import { isSupportPerformanceObserver } from './utils'\nimport { executeAfterLoad } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeEntries() {\n    executeAfterLoad(() => {\n        observeEvent('resource')\n        observeEvent('navigation')\n    })\n}\n\nlet hasAlreadyCollected = false\nexport function observeEvent(entryType) {\n    function entryHandler(list) {\n        const data = list.getEntries ? list.getEntries() : list\n        for (const entry of data) {\n            if (entryType === 'navigation') {\n                if (hasAlreadyCollected) return\n\n                if (observer) {\n                    observer.disconnect()\n                }\n\n                hasAlreadyCollected = true\n            }\n            // nextHopProtocol 属性为空，说明资源解析错误或者跨域\n            // beacon 用于上报数据，所以不统计。xhr fetch 单独统计\n            if ((!entry.nextHopProtocol && entryType !== 'navigation') || filter(entry.initiatorType)) {\n                return\n            }\n\n            lazyReportCache({\n                name: entry.name, // 资源名称\n                subType: entryType,\n                type: 'performance',\n                sourceType: entry.initiatorType, // 资源类型\n                duration: entry.duration, // 资源加载耗时\n                dns: entry.domainLookupEnd - entry.domainLookupStart, // DNS 耗时\n                tcp: entry.connectEnd - entry.connectStart, // 建立 tcp 连接耗时\n                redirect: entry.redirectEnd - entry.redirectStart, // 重定向耗时\n                ttfb: entry.responseStart, // 首字节时间\n                protocol: entry.nextHopProtocol, // 请求协议\n                responseBodySize: entry.encodedBodySize, // 响应内容大小\n                responseHeaderSize: entry.transferSize - entry.encodedBodySize, // 响应头部大小\n                resourceSize: entry.decodedBodySize, // 资源解压后的大小\n                isCache: isCache(entry), // 是否命中缓存\n                startTime: performance.now(),\n            })\n        }\n    }\n\n    let observer\n    if (isSupportPerformanceObserver()) {\n        observer = new PerformanceObserver(entryHandler)\n        observer.observe({ type: entryType, buffered: true })\n    } else {\n        const data = window.performance.getEntriesByType(entryType)\n        entryHandler(data)\n    }\n}\n\n// 不统计以下类型的资源\nconst preventType = ['fetch', 'xmlhttprequest', 'beacon']\nconst isSafari = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent)\nif (isSafari) {\n    // safari 会把接口请求当成 other\n    preventType.push('other')\n}\n\nfunction filter(type) {\n    return preventType.includes(type)\n}\n\nfunction isCache(entry) {\n    // 直接从缓存读取或 304\n    return entry.transferSize === 0 || (entry.transferSize !== 0 && entry.encodedBodySize === 0)\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observePaint() {\n    if (!isSupportPerformanceObserver()) return\n    \n    const entryHandler = (list) => {        \n        for (const entry of list.getEntries()) {\n            if (entry.name === 'first-contentful-paint') {\n                observer.disconnect()\n            }\n    \n            const json = entry.toJSON()\n            delete json.duration\n    \n            const reportData = {\n                ...json,\n                subType: entry.name,\n                type: 'performance',\n                pageURL: getPageURL(),\n            }\n\n            lazyReportCache(reportData)\n        }\n    }\n    \n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'paint', buffered: true })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            ['first-paint', 'first-contentful-paint'].forEach(type => {\n                lazyReportCache({\n                    startTime: performance.now() - event.timeStamp,\n                    name: type,\n                    subType: type,\n                    type: 'performance',\n                    pageURL: getPageURL(),\n                    bfc: true,\n                })\n            })\n        })\n    })\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nlet lcpDone = false\nexport function isLCPDone() {\n    return lcpDone\n}\n\nexport default function observeLCP() {\n    if (!isSupportPerformanceObserver()) {\n        lcpDone = true\n        return\n    }\n    \n    const entryHandler = (list) => {\n        lcpDone = true\n\n        if (observer) {\n            observer.disconnect()\n        }\n        \n        for (const entry of list.getEntries()) {\n            const json = entry.toJSON()\n            delete json.duration\n\n            const reportData = {\n                ...json,\n                target: entry.element?.tagName,\n                name: entry.entryType,\n                subType: entry.entryType,\n                type: 'performance',\n                pageURL: getPageURL(),\n            }\n            \n            lazyReportCache(reportData)\n        }\n    }\n\n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'largest-contentful-paint', buffered: true })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            lazyReportCache({\n                startTime: performance.now() - event.timeStamp,\n                name: 'largest-contentful-paint',\n                subType: 'largest-contentful-paint',\n                type: 'performance',\n                pageURL: getPageURL(),\n                bfc: true,\n            })\n        })\n    })\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, deepCopy, getPageURL, onHidden } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeCLS() {\n    if (!isSupportPerformanceObserver()) return\n\n    onBFCacheRestore(() => {\n        observeCLS()\n    })\n\n    let sessionValue = 0\n    let sessionEntries = []\n    const cls = {\n        subType: 'layout-shift',\n        name: 'layout-shift',\n        type: 'performance',\n        pageURL: getPageURL(),\n        value: 0,\n    }\n\n    const entryHandler = (list) => {\n        for (const entry of list.getEntries()) {\n            // Only count layout shifts without recent user input.\n            if (!entry.hadRecentInput) {\n                const firstSessionEntry = sessionEntries[0]\n                const lastSessionEntry = sessionEntries[sessionEntries.length - 1]\n            \n                // If the entry occurred less than 1 second after the previous entry and\n                // less than 5 seconds after the first entry in the session, include the\n                // entry in the current session. Otherwise, start a new session.\n                if (\n                    sessionValue\n                    && entry.startTime - lastSessionEntry.startTime < 1000\n                    && entry.startTime - firstSessionEntry.startTime < 5000\n                ) {\n                    sessionValue += entry.value\n                    sessionEntries.push(formatCLSEntry(entry))\n                } else {\n                    sessionValue = entry.value\n                    sessionEntries = [formatCLSEntry(entry)]\n                }\n            \n                // If the current session value is larger than the current CLS value,\n                // update CLS and the entries contributing to it.\n                if (sessionValue > cls.value) {\n                    cls.value = sessionValue\n                    cls.entries = sessionEntries\n                    cls.startTime = performance.now()\n                    lazyReportCache(deepCopy(cls))\n                }\n            }\n        }\n    }\n\n    const observer = new PerformanceObserver(entryHandler)\n    observer.observe({ type: 'layout-shift', buffered: true })\n\n    if (observer) {\n        onHidden(() => {\n            observer.takeRecords().map(entryHandler)\n        })\n    }\n}\n\nfunction formatCLSEntry(entry) {\n    const result = entry.toJSON()\n    delete result.duration\n    delete result.sources\n    \n    return result\n}","import { isSupportPerformanceObserver } from './utils'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\n\nexport default function observeFID() {\n    onBFCacheRestore(() => {\n        observeFID()\n    })\n    \n    if (!isSupportPerformanceObserver()) {\n        const entryHandler = (list) => {\n            if (observer) {\n                observer.disconnect()\n            }\n            \n            for (const entry of list.getEntries()) {\n                const json = entry.toJSON()\n                json.nodeName = entry.tagName\n                json.event = json.name\n                json.name = json.entryType\n                json.type = 'performance'\n                json.pageURL = getPageURL()\n                delete json.cancelable\n\n                lazyReportCache(json)\n            }\n        }\n    \n        const observer = new PerformanceObserver(entryHandler)\n        observer.observe({ type: 'first-input', buffered: true })\n        return\n    }\n\n    fidPolyfill()\n}\n\nfunction fidPolyfill() {\n    eachEventType(window.addEventListener)\n}\n\nfunction onInput(event) {\n    // Only count cancelable events, which should trigger behavior\n    // important to the user.\n    if (event.cancelable) {\n        // In some browsers `event.timeStamp` returns a `DOMTimeStamp` value\n        // (epoch time) instead of the newer `DOMHighResTimeStamp`\n        // (document-origin time). To check for that we assume any timestamp\n        // greater than 1 trillion is a `DOMTimeStamp`, and compare it using\n        // the `Date` object rather than `performance.now()`.\n        // - https://github.com/GoogleChromeLabs/first-input-delay/issues/4\n        const isEpochTime = event.timeStamp > 1e12\n        const now = isEpochTime ? Date.now() : performance.now()\n  \n        // Input delay is the delta between when the system received the event\n        // (e.g. event.timeStamp) and when it could run the callback (e.g. `now`).\n        const duration = now - event.timeStamp\n\n        lazyReportCache({\n            duration,\n            subType: 'first-input',\n            event: event.type,\n            name: 'first-input',\n            target: event.target.tagName,\n            startTime: event.timeStamp,\n            type: 'performance',\n            pageURL: getPageURL(),\n        })\n\n        eachEventType(window.removeEventListener)\n    }\n}\n\nfunction eachEventType(callback) {\n    const eventTypes = [\n        'mousedown',\n        'keydown',\n        'touchstart',\n    ]\n    \n    eventTypes.forEach((type) => callback(type, onInput, { passive: true, capture: true }))\n}","import { lazyReportCache } from '../utils/report'\nimport { onBFCacheRestore, getPageURL } from '../utils/utils'\n\nexport default function observerLoad() {\n    ['load', 'DOMContentLoaded'].forEach(type => onEvent(type))\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            ['load', 'DOMContentLoaded'].forEach(type => {\n                lazyReportCache({\n                    startTime: performance.now() - event.timeStamp,\n                    subType: type.toLocaleLowerCase(),\n                    type: 'performance',\n                    pageURL: getPageURL(),\n                    bfc: true,\n                })\n            })\n        })\n    })\n}\n\nfunction onEvent(type) {\n    function callback() {\n        lazyReportCache({\n            type: 'performance',\n            subType: type.toLocaleLowerCase(),\n            startTime: performance.now(),\n        })\n\n        window.removeEventListener(type, callback, true)\n    }\n\n    window.addEventListener(type, callback, true)\n}","import { executeAfterLoad, onBFCacheRestore, getPageURL } from '../utils/utils'\nimport { isLCPDone } from './observeLCP'\nimport { lazyReportCache } from '../utils/report'\n\nlet isOnLoaded = false\nexecuteAfterLoad(() => {\n    isOnLoaded = true\n})\n\nlet timer\nlet observer\nfunction checkDOMChange() {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n        // 等 load、lcp 事件触发后并且 DOM 树不再变化时，计算首屏渲染时间\n        if (isOnLoaded && isLCPDone()) {\n            observer && observer.disconnect()\n            lazyReportCache({\n                type: 'performance',\n                subType: 'first-screen-paint',\n                startTime: getRenderTime(),\n                pageURL: getPageURL(),\n            })\n\n            entries = null\n        } else {\n            checkDOMChange()\n        }\n    }, 500)\n}\n\nlet entries = []\nexport default function observeFirstScreenPaint() {\n    if (!MutationObserver) return\n\n    const next = window.requestAnimationFrame ? requestAnimationFrame : setTimeout\n    const ignoreDOMList = ['STYLE', 'SCRIPT', 'LINK', 'META']\n    observer = new MutationObserver(mutationList => {\n        checkDOMChange()\n        const entry = {\n            startTime: 0,\n            children: [],\n        }\n        \n        next(() => {\n            entry.startTime = performance.now()\n        })\n\n        for (const mutation of mutationList) {\n            if (mutation.addedNodes.length) {\n                for (const node of Array.from(mutation.addedNodes)) {\n                    if (\n                        node.nodeType === 1 \n                        && !ignoreDOMList.includes(node.tagName)\n                        && !isInclude(node, entry.children)\n                    ) {\n                        entry.children.push(node)\n                    }\n                }\n            }\n        }\n\n        if (entry.children.length) {\n            entries.push(entry)\n        }\n    })\n\n    observer.observe(document, {\n        childList: true,\n        subtree: true,\n    })\n\n    onBFCacheRestore(event => {\n        requestAnimationFrame(() => {\n            lazyReportCache({\n                startTime: performance.now() - event.timeStamp,\n                type: 'performance',\n                subType: 'first-screen-paint',\n                bfc: true,\n                pageURL: getPageURL(),\n            })\n        })\n    })\n}\n\nfunction getRenderTime() {\n    let startTime = 0\n    entries.forEach(entry => {\n        for (const node of entry.children) {\n            if (isInScreen(node) && entry.startTime > startTime && needToCalculate(node)) {\n                startTime = entry.startTime\n                break\n            }\n        }\n    })\n\n    // 需要和当前页面所有加载图片的时间做对比，取最大值\n    // 图片请求时间要小于 startTime，响应结束时间要大于 startTime\n    performance.getEntriesByType('resource').forEach(item => {\n        if (\n            item.initiatorType === 'img'\n            && item.fetchStart < startTime \n            && item.responseEnd > startTime\n        ) {\n            startTime = item.responseEnd\n        }\n    })\n    \n    return startTime\n}\n\nfunction needToCalculate(node) {\n    // 隐藏的元素不用计算\n    if (window.getComputedStyle(node).display === 'none') return false\n    \n    // 用于统计的图片不用计算\n    if (node.tagName === 'IMG' && node.width < 2 && node.height < 2) {\n        return false\n    }\n    \n    return true\n}\n\nfunction isInclude(node, arr) {\n    if (!node || node === document.documentElement) {\n        return false\n    }\n    \n    if (arr.includes(node)) {\n        return true\n    }\n\n    return isInclude(node.parentElement, arr)\n}\n\nconst viewportWidth = window.innerWidth\nconst viewportHeight = window.innerHeight\n\n// dom 对象是否在屏幕内\nfunction isInScreen(dom) {\n    const rectInfo = dom.getBoundingClientRect()\n    if (\n        rectInfo.left >= 0 \n        && rectInfo.left < viewportWidth\n        && rectInfo.top >= 0\n        && rectInfo.top < viewportHeight\n    ) {\n        return true\n    }\n}","import { originalOpen, originalSend, originalProto } from '../utils/xhr'\nimport { lazyReportCache } from '../utils/report'\n\nfunction overwriteOpenAndSend() {\n    originalProto.open = function newOpen(...args) {\n        this.url = args[1]\n        this.method = args[0]\n        originalOpen.apply(this, args)\n    }\n\n    originalProto.send = function newSend(...args) {\n        this.startTime = Date.now()\n\n        const onLoadend = () => {\n            this.endTime = Date.now()\n            this.duration = this.endTime - this.startTime\n\n            const { status, duration, startTime, endTime, url, method } = this\n            const reportData = {\n                status,\n                duration,\n                startTime,\n                endTime,\n                url,\n                method: (method || 'GET').toUpperCase(),\n                success: status >= 200 && status < 300,\n                subType: 'xhr',\n                type: 'performance',\n            }\n\n            lazyReportCache(reportData)\n            \n            this.removeEventListener('loadend', onLoadend, true)\n        }\n\n        this.addEventListener('loadend', onLoadend, true)\n        originalSend.apply(this, args)\n    }\n}\n\nexport default function xhr() {\n    overwriteOpenAndSend()\n}","import { lazyReportCache } from '../utils/report'\n\nconst originalFetch = window.fetch\n\nfunction overwriteFetch() {\n    window.fetch = function newFetch(url, config) {\n        const startTime = Date.now()\n        const reportData = {\n            startTime,\n            url,\n            method: (config?.method || 'GET').toUpperCase(),\n            subType: 'fetch',\n            type: 'performance',\n        }\n\n        return originalFetch(url, config)\n        .then(res => {\n            reportData.endTime = Date.now()\n            reportData.duration = reportData.endTime - reportData.startTime\n\n            const data = res.clone()\n            reportData.status = data.status\n            reportData.success = data.ok\n\n            lazyReportCache(reportData)\n\n            return res\n        })\n        .catch(err => {\n            reportData.endTime = Date.now()\n            reportData.duration = reportData.endTime - reportData.startTime\n            reportData.status = 0\n            reportData.success = false\n\n            lazyReportCache(reportData)\n\n            throw err\n        })\n    }\n}\n\nexport default function fetch() {\n    overwriteFetch()\n}","import { report } from '../utils/report'\nimport { deepCopy } from '../utils/utils'\n\nconst next = window.requestAnimationFrame \n    ? requestAnimationFrame : (callback) => { setTimeout(callback, 1000 / 60) }\n\nconst frames = []\n\nexport default function fps() {\n    let frame = 0\n    let lastSecond = Date.now()\n\n    function calculateFPS() {\n        frame++\n        const now = Date.now()\n        if (lastSecond + 1000 <= now) {\n            // 由于 now - lastSecond 的单位是毫秒，所以 frame 要 * 1000\n            const fps = Math.round((frame * 1000) / (now - lastSecond))\n            frames.push(fps)\n                \n            frame = 0\n            lastSecond = now\n        }\n    \n        // 避免上报太快，缓存一定数量再上报\n        if (frames.length >= 60) {\n            report(deepCopy({\n                frames,\n                type: 'performace',\n                subType: 'fps',\n            }))\n    \n            frames.length = 0\n        }\n\n        next(calculateFPS)\n    }\n\n    calculateFPS()\n}\n\nexport function isBlocking(fpsList, below = 20, last = 3) {\n    let count = 0\n    for (let i = 0; i < fpsList.length; i++) {\n        if (fpsList[i] && fpsList[i] < below) {\n            count++\n        } else {\n            count = 0\n        }\n\n        if (count >= last) {\n            return true\n        }\n    }\n\n    return false\n}","import { lazyReportCache } from '../utils/report'\nimport { getPageURL } from '../utils/utils'\n\nexport default function onVueRouter(Vue, router) {\n    let isFirst = true\n    let startTime\n    router.beforeEach((to, from, next) => {\n        // 首次进入页面已经有其他统计的渲染时间可用\n        if (isFirst) {\n            isFirst = false\n            return next()\n        }\n\n        // 给 router 新增一个字段，表示是否要计算渲染时间\n        // 只有路由跳转才需要计算\n        router.needCalculateRenderTime = true\n        startTime = performance.now()\n\n        next()\n    })\n\n    let timer\n    Vue.mixin({\n        mounted() {\n            if (!router.needCalculateRenderTime) return\n\n            this.$nextTick(() => {\n                // 仅在整个视图都被渲染之后才会运行的代码\n                const now = performance.now()\n                clearTimeout(timer)\n\n                timer = setTimeout(() => {\n                    router.needCalculateRenderTime = false\n                    lazyReportCache({\n                        type: 'performance',\n                        subType: 'vue-router-change-paint',\n                        duration: now - startTime,\n                        startTime: now,\n                        pageURL: getPageURL(),\n                    })\n                }, 1000)\n            })\n        },\n    })\n}","import observeEntries from './observeEntries'\nimport observePaint from './observePaint'\nimport observeLCP from './observeLCP'\nimport observeCLS from './observeCLS'\nimport observeFID from './observeFID'\nimport observerLoad from './observerLoad'\nimport observeFirstScreenPaint from './observeFirstScreenPaint'\nimport xhr from './xhr'\nimport fetch from './fetch'\nimport fps from './fps'\nimport onVueRouter from './onVueRouter'\nimport config from '../config'\n\nexport default function performance() {\n    observeEntries()\n    observePaint()\n    observeLCP()\n    observeCLS()\n    observeFID()\n    xhr()\n    fetch()\n    fps()\n    observerLoad()\n    observeFirstScreenPaint()\n\n    if (config.vue?.Vue && config.vue?.router) {\n        onVueRouter(config.vue.Vue, config.vue.router)\n    }\n}","import generateUniqueID from '../utils/generateUniqueID'\n\nlet uuid = ''\nexport function getUUID() {\n    if (uuid) return uuid\n\n    // 如果是手机 APP，可以调用原生方法或者设备唯一标识当成 uuid\n    uuid = localStorage.getItem('uuid')\n    if (uuid) return uuid\n\n    uuid = generateUniqueID()\n    localStorage.setItem('uuid', uuid)\n    return uuid\n}","import { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\nimport { getPageURL } from '../utils/utils'\n\nexport default function pv() {\n    lazyReportCache({\n        type: 'behavior',\n        subType: 'pv',\n        startTime: performance.now(),\n        pageURL: getPageURL(),\n        referrer: document.referrer,\n        uuid: getUUID(),\n    })\n}","import { report } from '../utils/report'\nimport { onBeforeunload, getPageURL } from '../utils/utils'\nimport { getUUID } from './utils'\n\nexport default function pageAccessDuration() {\n    onBeforeunload(() => {\n        report({\n            type: 'behavior',\n            subType: 'page-access-duration',\n            startTime: performance.now(),\n            pageURL: getPageURL(),\n            uuid: getUUID(),\n        }, true)\n    })\n}","import { lazyReportCache, report } from '../utils/report'\nimport { getUUID } from './utils'\nimport { onBeforeunload, executeAfterLoad, getPageURL } from '../utils/utils'\n\nlet timer\nlet startTime = 0\nlet hasReport = false\nlet pageHeight = 0\nlet scrollTop = 0\nlet viewportHeight = 0\n\nexport default function pageAccessHeight() {\n    window.addEventListener('scroll', onScroll)\n\n    onBeforeunload(() => {\n        const now = performance.now()\n        report({\n            startTime: now,\n            duration: now - startTime,\n            type: 'behavior',\n            subType: 'page-access-height',\n            pageURL: getPageURL(),\n            value: toPercent((scrollTop + viewportHeight) / pageHeight),\n            uuid: getUUID(),\n        }, true)\n    })\n\n    // 页面加载完成后初始化记录当前访问高度、时间\n    executeAfterLoad(() => {\n        startTime = performance.now()\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n        viewportHeight = window.innerHeight\n    })\n}\n\nfunction onScroll() {\n    clearTimeout(timer)\n    const now = performance.now()\n    \n    if (!hasReport) {\n        hasReport = true\n        lazyReportCache({\n            startTime: now,\n            duration: now - startTime,\n            type: 'behavior',\n            subType: 'page-access-height',\n            pageURL: getPageURL(),\n            value: toPercent((scrollTop + viewportHeight) / pageHeight),\n            uuid: getUUID(),\n        })\n    }\n\n    timer = setTimeout(() => {\n        hasReport = false\n        startTime = now\n        pageHeight = document.documentElement.scrollHeight || document.body.scrollHeight\n        scrollTop = document.documentElement.scrollTop || document.body.scrollTop\n        viewportHeight = window.innerHeight        \n    }, 500)\n}\n\nfunction toPercent(val) {\n    if (val >= 1) return '100%'\n    return (val * 100).toFixed(2) + '%'\n}","import { lazyReportCache } from '../utils/report'\nimport { getPageURL } from '../utils/utils'\nimport { getUUID } from './utils'\n\nexport default function onClick() {\n    ['mousedown', 'touchstart'].forEach(eventType => {\n        let timer\n        window.addEventListener(eventType, event => {\n            clearTimeout(timer)\n            timer = setTimeout(() => {\n                const target = event.target\n                const { top, left } = target.getBoundingClientRect()\n                \n                lazyReportCache({\n                    top,\n                    left,\n                    eventType,\n                    pageHeight: document.documentElement.scrollHeight || document.body.scrollHeight,\n                    scrollTop: document.documentElement.scrollTop || document.body.scrollTop,\n                    type: 'behavior',\n                    subType: 'click',\n                    target: target.tagName,\n                    paths: event.path?.map(item => item.tagName).filter(Boolean),\n                    startTime: event.timeStamp,\n                    pageURL: getPageURL(),\n                    outerHTML: target.outerHTML,\n                    innerHTML: target.innerHTML,\n                    width: target.offsetWidth,\n                    height: target.offsetHeight,\n                    viewport: {\n                        width: window.innerWidth,\n                        height: window.innerHeight,\n                    },\n                    uuid: getUUID(),\n                })\n            }, 500)\n        })\n    })\n}","import { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\n\nexport default function onVueRouter(router) {\n    router.beforeEach((to, from, next) => {\n        // 首次加载页面不用统计\n        if (!from.name) {\n            return next()\n        }\n\n        const data = {\n            params: to.params,\n            query: to.query,\n        }\n\n        lazyReportCache({\n            data,\n            name: to.name || to.path,\n            type: 'behavior',\n            subType: ['vue-router-change', 'pv'],\n            startTime: performance.now(),\n            from: from.fullPath,\n            to: to.fullPath,\n            uuid: getUUID(),\n        })\n\n        next()\n    })\n}","import { getPageURL } from '../utils/utils'\nimport { lazyReportCache } from '../utils/report'\nimport { getUUID } from './utils'\n\nexport default function pageChange() {\n    let from = ''\n    window.addEventListener('popstate', () => {\n        const to = getPageURL()\n\n        lazyReportCache({\n            from,\n            to,\n            type: 'behavior',\n            subType: 'popstate',\n            startTime: performance.now(),\n            uuid: getUUID(),\n        })\n\n        from = to\n    }, true)\n\n    let oldURL = ''\n    window.addEventListener('hashchange', event => {\n        const newURL = event.newURL\n\n        lazyReportCache({\n            from: oldURL,\n            to: newURL,\n            type: 'behavior',\n            subType: 'hashchange',\n            startTime: performance.now(),\n            uuid: getUUID(),\n        })\n\n        oldURL = newURL\n    }, true)\n}","import pv from './pv'\nimport pageAccessDuration from './pageAccessDuration'\nimport pageAccessHeight from './pageAccessHeight'\nimport onClick from './onClick'\nimport config from '../config'\nimport onVueRouter from './onVueRouter'\nimport pageChange from './pageChange'\n\nexport default function behavior() {\n    pv()\n    pageAccessDuration()\n    pageAccessHeight()\n    onClick()\n    pageChange()\n\n    if (config.vue?.router) {\n        onVueRouter(config.vue.router)\n    }\n}","import error from './error/index'\nimport performance from './performance/index'\nimport behavior from './behavior/index'\nimport { setConfig } from './config'\nimport { onBeforeunload, onHidden } from './utils/utils'\nimport { report } from './utils/report'\nimport { getCache, clearCache } from './utils/cache'\n\nconst monitor = {\n    init(options = {}) {\n        setConfig(options)\n        error()\n        performance()\n        behavior();\n\n        // 当页面进入后台或关闭前时，将所有的 cache 数据进行上报\n        [onBeforeunload, onHidden].forEach(fn => {\n            fn(() => {\n                const data = getCache()\n                if (data.length) {\n                    report(data, true)\n                    clearCache()\n                }\n            })\n        })\n    },\n    report,\n}\n\nexport default monitor"],"names":["originalProto","XMLHttpRequest","prototype","originalOpen","open","originalSend","send","deepCopy","target","result","Array","isArray","key","onBFCacheRestore","callback","window","addEventListener","event","persisted","onBeforeunload","onHidden","once","onHiddenOrPageHide","type","document","visibilityState","removeEventListener","executeAfterLoad","readyState","onLoad","getPageURL","location","href","cache","getCache","addCache","data","push","clearCache","length","generateUniqueID","Date","now","Math","floor","random","config","url","appID","userID","vue","Vue","router","setConfig","options","isSupportSendBeacon","navigator","sendBeacon","bind","reportWithXHR","sessionID","report","isImmediate","console","error","reportData","JSON","stringify","id","requestIdleCallback","timeout","setTimeout","timer","lazyReportCache","clearTimeout","xhr","call","oldConsoleError","args","apply","subType","startTime","performance","errData","pageURL","e","src","timeStamp","html","outerHTML","resourceType","tagName","paths","path","map","item","filter","Boolean","onerror","msg","line","column","stack","reason","errorHandler","err","vm","info","isSupportPerformanceObserver","PerformanceObserver","observeEntries","observeEvent","hasAlreadyCollected","entryType","entryHandler","list","getEntries","entry","observer","disconnect","nextHopProtocol","initiatorType","name","sourceType","duration","dns","domainLookupEnd","domainLookupStart","tcp","connectEnd","connectStart","redirect","redirectEnd","redirectStart","ttfb","responseStart","protocol","responseBodySize","encodedBodySize","responseHeaderSize","transferSize","resourceSize","decodedBodySize","isCache","observe","buffered","getEntriesByType","preventType","isSafari","test","userAgent","includes","observePaint","json","toJSON","requestAnimationFrame","forEach","bfc","lcpDone","isLCPDone","observeLCP","element","observeCLS","sessionValue","sessionEntries","cls","value","hadRecentInput","firstSessionEntry","lastSessionEntry","formatCLSEntry","entries","takeRecords","sources","observeFID","nodeName","cancelable","fidPolyfill","eachEventType","onInput","isEpochTime","eventTypes","passive","capture","observerLoad","onEvent","toLocaleLowerCase","isOnLoaded","checkDOMChange","getRenderTime","observeFirstScreenPaint","MutationObserver","next","ignoreDOMList","mutationList","children","mutation","addedNodes","from","node","nodeType","isInclude","childList","subtree","isInScreen","needToCalculate","fetchStart","responseEnd","getComputedStyle","display","width","height","arr","documentElement","parentElement","viewportWidth","innerWidth","viewportHeight","innerHeight","dom","rectInfo","getBoundingClientRect","left","top","overwriteOpenAndSend","newOpen","method","newSend","onLoadend","endTime","status","toUpperCase","success","originalFetch","fetch","overwriteFetch","newFetch","then","res","clone","ok","catch","frames","fps","frame","lastSecond","calculateFPS","round","onVueRouter","isFirst","beforeEach","to","needCalculateRenderTime","mixin","mounted","$nextTick","uuid","getUUID","localStorage","getItem","setItem","pv","referrer","pageAccessDuration","hasReport","pageHeight","scrollTop","pageAccessHeight","onScroll","toPercent","scrollHeight","body","val","toFixed","onClick","eventType","innerHTML","offsetWidth","offsetHeight","viewport","params","query","fullPath","pageChange","oldURL","newURL","behavior","monitor","init","fn"],"mappings":"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"}